/**
 * LacusSoft :: cpf-fmt v1.1.0
 *
 * @author Julio L. Muller.
 * @license MIT - 2020-2021
 */

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.cpfFmt = factory());
}(this, (function () { 'use strict';

    /**
     * num-only v1.1.0
     *
     * @author Julio L. Muller.
     * @license MIT - 2020-2021
     */

    function numOnly(target) {
      return String(target).replace(/\D/g, '');
    }

    var index_cjs = numOnly;

    /**
     * Copyright (C) 2017-present by Andrea Giammarchi - @WebReflection
     *
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to deal
     * in the Software without restriction, including without limitation the rights
     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     * copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     *
     * The above copyright notice and this permission notice shall be included in
     * all copies or substantial portions of the Software.
     *
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
     * THE SOFTWARE.
     */
    var _ref = '',
        replace = _ref.replace; // escape
    var ca = /[&<>'"]/g;
    var esca = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      "'": '&#39;',
      '"': '&quot;'
    };

    var pe = function pe(m) {
      return esca[m];
    };
    /**
     * Safely escape HTML entities such as `&`, `<`, `>`, `"`, and `'`.
     * @param {string} es the input to safely escape
     * @returns {string} the escaped input, and it **throws** an error if
     *  the input type is unexpected, except for boolean and numbers,
     *  converted as string.
     */


    var escape = function escape(es) {
      return replace.call(es, ca, pe);
    }; // unescape

    function _typeof(obj) {
      "@babel/helpers - typeof";

      if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
        _typeof = function (obj) {
          return typeof obj;
        };
      } else {
        _typeof = function (obj) {
          return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
        };
      }

      return _typeof(obj);
    }

    var isMergeableObject = function isMergeableObject(value) {
      return isNonNullObject(value) && !isSpecial(value);
    };

    function isNonNullObject(value) {
      return !!value && _typeof(value) === 'object';
    }

    function isSpecial(value) {
      var stringValue = Object.prototype.toString.call(value);
      return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isReactElement(value);
    } // see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25


    var canUseSymbol = typeof Symbol === 'function' && Symbol["for"];
    var REACT_ELEMENT_TYPE = canUseSymbol ? Symbol["for"]('react.element') : 0xeac7;

    function isReactElement(value) {
      return value.$$typeof === REACT_ELEMENT_TYPE;
    }

    function emptyTarget(val) {
      return Array.isArray(val) ? [] : {};
    }

    function cloneUnlessOtherwiseSpecified(value, options) {
      return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;
    }

    function defaultArrayMerge(target, source, options) {
      return target.concat(source).map(function (element) {
        return cloneUnlessOtherwiseSpecified(element, options);
      });
    }

    function getMergeFunction(key, options) {
      if (!options.customMerge) {
        return deepmerge;
      }

      var customMerge = options.customMerge(key);
      return typeof customMerge === 'function' ? customMerge : deepmerge;
    }

    function getEnumerableOwnPropertySymbols(target) {
      return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {
        return target.propertyIsEnumerable(symbol);
      }) : [];
    }

    function getKeys(target) {
      return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));
    }

    function propertyIsOnObject(object, property) {
      try {
        return property in object;
      } catch (_) {
        return false;
      }
    } // Protects from prototype poisoning and unexpected merging up the prototype chain.


    function propertyIsUnsafe(target, key) {
      return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,
      && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,
      && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.
    }

    function mergeObject(target, source, options) {
      var destination = {};

      if (options.isMergeableObject(target)) {
        getKeys(target).forEach(function (key) {
          destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);
        });
      }

      getKeys(source).forEach(function (key) {
        if (propertyIsUnsafe(target, key)) {
          return;
        }

        if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {
          destination[key] = getMergeFunction(key, options)(target[key], source[key], options);
        } else {
          destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);
        }
      });
      return destination;
    }

    function deepmerge(target, source, options) {
      options = options || {};
      options.arrayMerge = options.arrayMerge || defaultArrayMerge;
      options.isMergeableObject = options.isMergeableObject || isMergeableObject; // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()
      // implementations can use it. The caller may not replace it.

      options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;
      var sourceIsArray = Array.isArray(source);
      var targetIsArray = Array.isArray(target);
      var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;

      if (!sourceAndTargetTypesMatch) {
        return cloneUnlessOtherwiseSpecified(source, options);
      } else if (sourceIsArray) {
        return options.arrayMerge(target, source, options);
      } else {
        return mergeObject(target, source, options);
      }
    }

    deepmerge.all = function deepmergeAll(array, options) {
      if (!Array.isArray(array)) {
        throw new Error('first argument should be an array');
      }

      return array.reduce(function (prev, next) {
        return deepmerge(prev, next, options);
      }, {});
    };

    var deepmerge_1 = deepmerge;
    var cjs = deepmerge_1;

    var defaultOptions = {
        delimiters: {
            dot: '.',
            dash: '-',
        },
        hiddenRange: {
            start: 3,
            end: 10,
        },
        onFail: function (value) { return value; },
        hiddenKey: '*',
        hidden: false,
        escape: false,
    };
    /**
     * Merge custom options to the default ones.
     */
    function mergeOptions(customOptions) {
        if (customOptions === void 0) { customOptions = {}; }
        var options = cjs(defaultOptions, customOptions);
        if (options.hidden) {
            if (isNaN(options.hiddenRange.start)
                || options.hiddenRange.start < 0
                || options.hiddenRange.start > 10) {
                throw new TypeError('Option "hiddenRange.start" must be a number between 0 and 10.');
            }
            if (isNaN(options.hiddenRange.end)
                || options.hiddenRange.end < 0
                || options.hiddenRange.end > 10) {
                throw new TypeError('Option "hiddenRange.end" must be a number between 0 and 10.');
            }
            if (options.hiddenRange.start > options.hiddenRange.end) {
                var aux = options.hiddenRange.start;
                options.hiddenRange.start = options.hiddenRange.end;
                options.hiddenRange.end = aux;
            }
        }
        if (typeof options.onFail !== 'function') {
            throw new TypeError('The option "onFail" must be a callback function.');
        }
        return options;
    }

    /**
     * Validate a given CPF char sequence.
     */
    function cpfFmt(cpfString, options) {
        var CPF_LENGTH = 11;
        var cpfArray = index_cjs(cpfString).split('');
        var customOptions = mergeOptions(options);
        if (cpfArray.length !== CPF_LENGTH) {
            var error = new Error("Parameter \"" + cpfString + "\" does not contain " + CPF_LENGTH + " digits.");
            return customOptions.onFail(cpfString, error);
        }
        if (customOptions.hidden) {
            for (var i = customOptions.hiddenRange.start; i <= customOptions.hiddenRange.end; i++) {
                cpfArray[i] = customOptions.hiddenKey;
            }
        }
        cpfArray.splice(9, 0, customOptions.delimiters.dash); // eslint-disable-line no-magic-numbers
        cpfArray.splice(6, 0, customOptions.delimiters.dot); // eslint-disable-line no-magic-numbers
        cpfArray.splice(3, 0, customOptions.delimiters.dot); // eslint-disable-line no-magic-numbers
        var cpfPretty = cpfArray.join('');
        if (customOptions.escape) {
            return escape(cpfPretty);
        }
        return cpfPretty;
    }

    return cpfFmt;

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3BmLWZtdC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2h0bWwtZXNjYXBlci9lc20vaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZGVlcG1lcmdlL2Rpc3QvY2pzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChDKSAyMDE3LXByZXNlbnQgYnkgQW5kcmVhIEdpYW1tYXJjaGkgLSBAV2ViUmVmbGVjdGlvblxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gKiBUSEUgU09GVFdBUkUuXG4gKi9cblxuY29uc3Qge3JlcGxhY2V9ID0gJyc7XG5cbi8vIGVzY2FwZVxuY29uc3QgZXMgPSAvJig/OmFtcHwjMzh8bHR8IzYwfGd0fCM2MnxhcG9zfCMzOXxxdW90fCMzNCk7L2c7XG5jb25zdCBjYSA9IC9bJjw+J1wiXS9nO1xuXG5jb25zdCBlc2NhID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgXCInXCI6ICcmIzM5OycsXG4gICdcIic6ICcmcXVvdDsnXG59O1xuY29uc3QgcGUgPSBtID0+IGVzY2FbbV07XG5cbi8qKlxuICogU2FmZWx5IGVzY2FwZSBIVE1MIGVudGl0aWVzIHN1Y2ggYXMgYCZgLCBgPGAsIGA+YCwgYFwiYCwgYW5kIGAnYC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlcyB0aGUgaW5wdXQgdG8gc2FmZWx5IGVzY2FwZVxuICogQHJldHVybnMge3N0cmluZ30gdGhlIGVzY2FwZWQgaW5wdXQsIGFuZCBpdCAqKnRocm93cyoqIGFuIGVycm9yIGlmXG4gKiAgdGhlIGlucHV0IHR5cGUgaXMgdW5leHBlY3RlZCwgZXhjZXB0IGZvciBib29sZWFuIGFuZCBudW1iZXJzLFxuICogIGNvbnZlcnRlZCBhcyBzdHJpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBlc2NhcGUgPSBlcyA9PiByZXBsYWNlLmNhbGwoZXMsIGNhLCBwZSk7XG5cblxuLy8gdW5lc2NhcGVcbmNvbnN0IHVuZXMgPSB7XG4gICcmYW1wOyc6ICcmJyxcbiAgJyYjMzg7JzogJyYnLFxuICAnJmx0Oyc6ICc8JyxcbiAgJyYjNjA7JzogJzwnLFxuICAnJmd0Oyc6ICc+JyxcbiAgJyYjNjI7JzogJz4nLFxuICAnJmFwb3M7JzogXCInXCIsXG4gICcmIzM5Oyc6IFwiJ1wiLFxuICAnJnF1b3Q7JzogJ1wiJyxcbiAgJyYjMzQ7JzogJ1wiJ1xufTtcbmNvbnN0IGNhcGUgPSBtID0+IHVuZXNbbV07XG5cbi8qKlxuICogU2FmZWx5IHVuZXNjYXBlIHByZXZpb3VzbHkgZXNjYXBlZCBlbnRpdGllcyBzdWNoIGFzIGAmYCwgYDxgLCBgPmAsIGBcImAsXG4gKiBhbmQgYCdgLlxuICogQHBhcmFtIHtzdHJpbmd9IHVuIGEgcHJldmlvdXNseSBlc2NhcGVkIHN0cmluZ1xuICogQHJldHVybnMge3N0cmluZ30gdGhlIHVuZXNjYXBlZCBpbnB1dCwgYW5kIGl0ICoqdGhyb3dzKiogYW4gZXJyb3IgaWZcbiAqICB0aGUgaW5wdXQgdHlwZSBpcyB1bmV4cGVjdGVkLCBleGNlcHQgZm9yIGJvb2xlYW4gYW5kIG51bWJlcnMsXG4gKiAgY29udmVydGVkIGFzIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNvbnN0IHVuZXNjYXBlID0gdW4gPT4gcmVwbGFjZS5jYWxsKHVuLCBlcywgY2FwZSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpc01lcmdlYWJsZU9iamVjdCA9IGZ1bmN0aW9uIGlzTWVyZ2VhYmxlT2JqZWN0KHZhbHVlKSB7XG5cdHJldHVybiBpc05vbk51bGxPYmplY3QodmFsdWUpXG5cdFx0JiYgIWlzU3BlY2lhbCh2YWx1ZSlcbn07XG5cbmZ1bmN0aW9uIGlzTm9uTnVsbE9iamVjdCh2YWx1ZSkge1xuXHRyZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG59XG5cbmZ1bmN0aW9uIGlzU3BlY2lhbCh2YWx1ZSkge1xuXHR2YXIgc3RyaW5nVmFsdWUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG5cdHJldHVybiBzdHJpbmdWYWx1ZSA9PT0gJ1tvYmplY3QgUmVnRXhwXSdcblx0XHR8fCBzdHJpbmdWYWx1ZSA9PT0gJ1tvYmplY3QgRGF0ZV0nXG5cdFx0fHwgaXNSZWFjdEVsZW1lbnQodmFsdWUpXG59XG5cbi8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi9iNWFjOTYzZmI3OTFkMTI5OGU3ZjM5NjIzNjM4M2JjOTU1ZjkxNmMxL3NyYy9pc29tb3JwaGljL2NsYXNzaWMvZWxlbWVudC9SZWFjdEVsZW1lbnQuanMjTDIxLUwyNVxudmFyIGNhblVzZVN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmZvcjtcbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSBjYW5Vc2VTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykgOiAweGVhYzc7XG5cbmZ1bmN0aW9uIGlzUmVhY3RFbGVtZW50KHZhbHVlKSB7XG5cdHJldHVybiB2YWx1ZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFXG59XG5cbmZ1bmN0aW9uIGVtcHR5VGFyZ2V0KHZhbCkge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpID8gW10gOiB7fVxufVxuXG5mdW5jdGlvbiBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZCh2YWx1ZSwgb3B0aW9ucykge1xuXHRyZXR1cm4gKG9wdGlvbnMuY2xvbmUgIT09IGZhbHNlICYmIG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QodmFsdWUpKVxuXHRcdD8gZGVlcG1lcmdlKGVtcHR5VGFyZ2V0KHZhbHVlKSwgdmFsdWUsIG9wdGlvbnMpXG5cdFx0OiB2YWx1ZVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0QXJyYXlNZXJnZSh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuXHRyZXR1cm4gdGFyZ2V0LmNvbmNhdChzb3VyY2UpLm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0cmV0dXJuIGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKGVsZW1lbnQsIG9wdGlvbnMpXG5cdH0pXG59XG5cbmZ1bmN0aW9uIGdldE1lcmdlRnVuY3Rpb24oa2V5LCBvcHRpb25zKSB7XG5cdGlmICghb3B0aW9ucy5jdXN0b21NZXJnZSkge1xuXHRcdHJldHVybiBkZWVwbWVyZ2Vcblx0fVxuXHR2YXIgY3VzdG9tTWVyZ2UgPSBvcHRpb25zLmN1c3RvbU1lcmdlKGtleSk7XG5cdHJldHVybiB0eXBlb2YgY3VzdG9tTWVyZ2UgPT09ICdmdW5jdGlvbicgPyBjdXN0b21NZXJnZSA6IGRlZXBtZXJnZVxufVxuXG5mdW5jdGlvbiBnZXRFbnVtZXJhYmxlT3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkge1xuXHRyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc1xuXHRcdD8gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpLmZpbHRlcihmdW5jdGlvbihzeW1ib2wpIHtcblx0XHRcdHJldHVybiB0YXJnZXQucHJvcGVydHlJc0VudW1lcmFibGUoc3ltYm9sKVxuXHRcdH0pXG5cdFx0OiBbXVxufVxuXG5mdW5jdGlvbiBnZXRLZXlzKHRhcmdldCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXModGFyZ2V0KS5jb25jYXQoZ2V0RW51bWVyYWJsZU93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKVxufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUlzT25PYmplY3Qob2JqZWN0LCBwcm9wZXJ0eSkge1xuXHR0cnkge1xuXHRcdHJldHVybiBwcm9wZXJ0eSBpbiBvYmplY3Rcblx0fSBjYXRjaChfKSB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cbn1cblxuLy8gUHJvdGVjdHMgZnJvbSBwcm90b3R5cGUgcG9pc29uaW5nIGFuZCB1bmV4cGVjdGVkIG1lcmdpbmcgdXAgdGhlIHByb3RvdHlwZSBjaGFpbi5cbmZ1bmN0aW9uIHByb3BlcnR5SXNVbnNhZmUodGFyZ2V0LCBrZXkpIHtcblx0cmV0dXJuIHByb3BlcnR5SXNPbk9iamVjdCh0YXJnZXQsIGtleSkgLy8gUHJvcGVydGllcyBhcmUgc2FmZSB0byBtZXJnZSBpZiB0aGV5IGRvbid0IGV4aXN0IGluIHRoZSB0YXJnZXQgeWV0LFxuXHRcdCYmICEoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpIC8vIHVuc2FmZSBpZiB0aGV5IGV4aXN0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4sXG5cdFx0XHQmJiBPYmplY3QucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0YXJnZXQsIGtleSkpIC8vIGFuZCBhbHNvIHVuc2FmZSBpZiB0aGV5J3JlIG5vbmVudW1lcmFibGUuXG59XG5cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0KHRhcmdldCwgc291cmNlLCBvcHRpb25zKSB7XG5cdHZhciBkZXN0aW5hdGlvbiA9IHt9O1xuXHRpZiAob3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdCh0YXJnZXQpKSB7XG5cdFx0Z2V0S2V5cyh0YXJnZXQpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRkZXN0aW5hdGlvbltrZXldID0gY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQodGFyZ2V0W2tleV0sIG9wdGlvbnMpO1xuXHRcdH0pO1xuXHR9XG5cdGdldEtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdGlmIChwcm9wZXJ0eUlzVW5zYWZlKHRhcmdldCwga2V5KSkge1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0aWYgKHByb3BlcnR5SXNPbk9iamVjdCh0YXJnZXQsIGtleSkgJiYgb3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdChzb3VyY2Vba2V5XSkpIHtcblx0XHRcdGRlc3RpbmF0aW9uW2tleV0gPSBnZXRNZXJnZUZ1bmN0aW9uKGtleSwgb3B0aW9ucykodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldLCBvcHRpb25zKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGVzdGluYXRpb25ba2V5XSA9IGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKHNvdXJjZVtrZXldLCBvcHRpb25zKTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gZGVzdGluYXRpb25cbn1cblxuZnVuY3Rpb24gZGVlcG1lcmdlKHRhcmdldCwgc291cmNlLCBvcHRpb25zKSB7XG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRvcHRpb25zLmFycmF5TWVyZ2UgPSBvcHRpb25zLmFycmF5TWVyZ2UgfHwgZGVmYXVsdEFycmF5TWVyZ2U7XG5cdG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QgPSBvcHRpb25zLmlzTWVyZ2VhYmxlT2JqZWN0IHx8IGlzTWVyZ2VhYmxlT2JqZWN0O1xuXHQvLyBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZCBpcyBhZGRlZCB0byBgb3B0aW9uc2Agc28gdGhhdCBjdXN0b20gYXJyYXlNZXJnZSgpXG5cdC8vIGltcGxlbWVudGF0aW9ucyBjYW4gdXNlIGl0LiBUaGUgY2FsbGVyIG1heSBub3QgcmVwbGFjZSBpdC5cblx0b3B0aW9ucy5jbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZCA9IGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkO1xuXG5cdHZhciBzb3VyY2VJc0FycmF5ID0gQXJyYXkuaXNBcnJheShzb3VyY2UpO1xuXHR2YXIgdGFyZ2V0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkodGFyZ2V0KTtcblx0dmFyIHNvdXJjZUFuZFRhcmdldFR5cGVzTWF0Y2ggPSBzb3VyY2VJc0FycmF5ID09PSB0YXJnZXRJc0FycmF5O1xuXG5cdGlmICghc291cmNlQW5kVGFyZ2V0VHlwZXNNYXRjaCkge1xuXHRcdHJldHVybiBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZChzb3VyY2UsIG9wdGlvbnMpXG5cdH0gZWxzZSBpZiAoc291cmNlSXNBcnJheSkge1xuXHRcdHJldHVybiBvcHRpb25zLmFycmF5TWVyZ2UodGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIG1lcmdlT2JqZWN0KHRhcmdldCwgc291cmNlLCBvcHRpb25zKVxuXHR9XG59XG5cbmRlZXBtZXJnZS5hbGwgPSBmdW5jdGlvbiBkZWVwbWVyZ2VBbGwoYXJyYXksIG9wdGlvbnMpIHtcblx0aWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkge1xuXHRcdHRocm93IG5ldyBFcnJvcignZmlyc3QgYXJndW1lbnQgc2hvdWxkIGJlIGFuIGFycmF5Jylcblx0fVxuXG5cdHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgbmV4dCkge1xuXHRcdHJldHVybiBkZWVwbWVyZ2UocHJldiwgbmV4dCwgb3B0aW9ucylcblx0fSwge30pXG59O1xuXG52YXIgZGVlcG1lcmdlXzEgPSBkZWVwbWVyZ2U7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVlcG1lcmdlXzE7XG4iXSwibmFtZXMiOlsicmVwbGFjZSIsImNhIiwiZXNjYSIsInBlIiwibSIsImVzY2FwZSIsImVzIiwiY2FsbCIsImlzTWVyZ2VhYmxlT2JqZWN0IiwidmFsdWUiLCJpc05vbk51bGxPYmplY3QiLCJpc1NwZWNpYWwiLCJzdHJpbmdWYWx1ZSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiaXNSZWFjdEVsZW1lbnQiLCJjYW5Vc2VTeW1ib2wiLCJTeW1ib2wiLCJSRUFDVF9FTEVNRU5UX1RZUEUiLCIkJHR5cGVvZiIsImVtcHR5VGFyZ2V0IiwidmFsIiwiQXJyYXkiLCJpc0FycmF5IiwiY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQiLCJvcHRpb25zIiwiY2xvbmUiLCJkZWVwbWVyZ2UiLCJkZWZhdWx0QXJyYXlNZXJnZSIsInRhcmdldCIsInNvdXJjZSIsImNvbmNhdCIsIm1hcCIsImVsZW1lbnQiLCJnZXRNZXJnZUZ1bmN0aW9uIiwia2V5IiwiY3VzdG9tTWVyZ2UiLCJnZXRFbnVtZXJhYmxlT3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZmlsdGVyIiwic3ltYm9sIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJnZXRLZXlzIiwia2V5cyIsInByb3BlcnR5SXNPbk9iamVjdCIsIm9iamVjdCIsInByb3BlcnR5IiwiXyIsInByb3BlcnR5SXNVbnNhZmUiLCJoYXNPd25Qcm9wZXJ0eSIsIm1lcmdlT2JqZWN0IiwiZGVzdGluYXRpb24iLCJmb3JFYWNoIiwiYXJyYXlNZXJnZSIsInNvdXJjZUlzQXJyYXkiLCJ0YXJnZXRJc0FycmF5Iiwic291cmNlQW5kVGFyZ2V0VHlwZXNNYXRjaCIsImFsbCIsImRlZXBtZXJnZUFsbCIsImFycmF5IiwiRXJyb3IiLCJyZWR1Y2UiLCJwcmV2IiwibmV4dCIsImRlZXBtZXJnZV8xIiwiY2pzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUFBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUVBLFdBQWtCLEVBQWxCO0lBQUEsSUFBT0EsT0FBUCxRQUFPQSxPQUFQO0lBSUEsSUFBTUMsRUFBRSxHQUFHLFVBQVg7SUFFQSxJQUFNQyxJQUFJLEdBQUc7SUFDWCxPQUFLLE9BRE07SUFFWCxPQUFLLE1BRk07SUFHWCxPQUFLLE1BSE07SUFJWCxPQUFLLE9BSk07SUFLWCxPQUFLO0lBTE0sQ0FBYjs7SUFPQSxJQUFNQyxFQUFFLEdBQUcsU0FBTEEsRUFBSyxDQUFBQyxDQUFDO0lBQUEsU0FBSUYsSUFBSSxDQUFDRSxDQUFELENBQVI7SUFBQSxDQUFaO0lBRUE7SUFDQTtJQUNBO0lBQ0E7SUFD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
